{"version":3,"sources":["webpack:///./modal/refs.js","webpack:///./modal/modal.js"],"names":["refs","list","document","querySelector","form","modal","body","content","addEventListener","e","preventDefault","data","decision","listPartners","currentDecision","submitter","name","checkedInputs","querySelectorAll","Array","from","map","item","push","defaultValue","stringCookie","JSON","stringify","cookie","classList","add","remove","target","nodeName","setAttribute","renderList","vendors","Object","values","policyUrl","id","insertAdjacentHTML","fetch","then","res","json"],"mappings":"6MAQeA,EARF,CACXC,KAAMC,SAASC,cAAc,SAC7BC,KAAMF,SAASC,cAAc,SAC7BE,MAAOH,SAASC,cAAc,aAC9BG,KAAMJ,SAASC,cAAc,QAC7BI,QAASL,SAASC,cAAc,aCFlCH,EAAKI,KAAKI,iBAAiB,UAwC3B,SAAoBC,GAClBA,EAAEC,iBAEF,IAAMC,EAAO,CACXC,SAAU,GACVC,aAAc,IAGVC,EAAkBL,EAAEM,UAAUC,KAGpC,GAFAL,EAAKC,SAAWE,EAEQ,WAApBA,EAA8B,CAChC,IAAMG,EAAgBf,SAASgB,iBAAiB,kBAC5BC,MAAMC,KAAKH,GAEnBI,KAAI,SAAAC,GACdX,EAAKE,aAAaU,KAAKD,EAAKE,iBAIhC,IAAMC,EAAkBC,KAAKC,UAAUhB,GAArB,kBAClBT,SAAS0B,OAASH,EAElBzB,EAAKK,MAAMwB,UAAUC,IAAI,aACzB9B,EAAKM,KAAKuB,UAAUE,OAAO,eAC3B/B,EAAKO,QAAQsB,UAAUE,OAAO,WAhEhC/B,EAAKI,KAAKI,iBAAiB,SAmE3B,SAAoBC,GAClB,GAA0B,UAAtBA,EAAEuB,OAAOC,SACX,OAEFxB,EAAEuB,OAAOE,aAAa,UAAW,WApDnC,SAASC,EAAT,GAAiC,IAAXC,EAAW,EAAXA,QACpBC,OAAOC,OAAOF,GAASf,KAAI,YAA6B,IAA1BL,EAA0B,EAA1BA,KAAMuB,EAAoB,EAApBA,UAAWC,EAAS,EAATA,GAC7CxC,EAAKC,KAAKwC,mBACR,aADF,0EAIgCD,EAJhC,wBAI0DxB,EAJ1D,yDAMcA,EANd,+BAOmBuB,EAPnB,KAOiCA,EAPjC,8DAaFvC,EAAKK,MAAMwB,UAAUE,OAAO,aAC5B/B,EAAKM,KAAKuB,UAAUC,IAAI,eACxB9B,EAAKO,QAAQsB,UAAUC,IAAI,QAtBtB5B,SAAS0B,QANdc,MALA,6DAMGC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,KAAKR,K","file":"main.73eefe38bd562c8eafc1.js","sourcesContent":["const refs = {\r\n  list: document.querySelector('.list'),\r\n  form: document.querySelector('#form'),\r\n  modal: document.querySelector('.backdrop'),\r\n  body: document.querySelector('body'),\r\n  content: document.querySelector('.content'),\r\n};\r\n\r\nexport default refs;\r\n","import './modal.css';\r\nimport refs from './refs.js';\r\n\r\nrefs.form.addEventListener('submit', submitForm);\r\nrefs.form.addEventListener('click', addChecked);\r\n\r\nconst urlVedorList =\r\n  'https://optad360.mgr.consensu.org/cmp/v2/vendor-list.json';\r\n\r\nmodalOpen();\r\n\r\nfunction fetchApi() {\r\n  fetch(urlVedorList)\r\n    .then(res => res.json())\r\n    .then(renderList);\r\n}\r\n\r\nfunction modalOpen() {\r\n  if (!document.cookie) {\r\n    fetchApi();\r\n  }\r\n}\r\n\r\nfunction renderList({ vendors }) {\r\n  Object.values(vendors).map(({ name, policyUrl, id }) => {\r\n    refs.list.insertAdjacentHTML(\r\n      'afterbegin',\r\n      `<li>\r\n        <label class=\"label\">\r\n        <input type=\"checkbox\" id=${id} name=\"input\" value=\"${name}\">\r\n        <div class=\"input-item\">\r\n            <h2>${name}</h2>\r\n            <a href=\"${policyUrl}\">${policyUrl}</a>\r\n        </div>\r\n          </label>\r\n        </li>`,\r\n    );\r\n  });\r\n  refs.modal.classList.remove('is-hidden');\r\n  refs.body.classList.add('modal__open');\r\n  refs.content.classList.add('blur');\r\n}\r\n\r\nfunction submitForm(e) {\r\n  e.preventDefault();\r\n\r\n  const data = {\r\n    decision: '',\r\n    listPartners: [],\r\n  };\r\n\r\n  const currentDecision = e.submitter.name;\r\n  data.decision = currentDecision;\r\n\r\n  if (currentDecision === 'Accept') {\r\n    const checkedInputs = document.querySelectorAll('[checked=true]');\r\n    const checkedList = Array.from(checkedInputs);\r\n\r\n    checkedList.map(item => {\r\n      data.listPartners.push(item.defaultValue);\r\n    });\r\n  }\r\n\r\n  const stringCookie = `${JSON.stringify(data)}; max-age=86400`;\r\n  document.cookie = stringCookie;\r\n\r\n  refs.modal.classList.add('is-hidden');\r\n  refs.body.classList.remove('modal__open');\r\n  refs.content.classList.remove('blur');\r\n}\r\n\r\nfunction addChecked(e) {\r\n  if (e.target.nodeName !== 'INPUT') {\r\n    return;\r\n  }\r\n  e.target.setAttribute('checked', 'true');\r\n}\r\n"],"sourceRoot":""}